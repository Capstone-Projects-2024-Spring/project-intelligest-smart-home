"use strict";(self.webpackChunkcreate_project_docs=self.webpackChunkcreate_project_docs||[]).push([[2826],{24604:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>l,contentTitle:()=>n,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>o});var d=s(85893),t=s(11151);const a={sidebar_position:1,description:"Descriptions of classes, fields, and functions"},n="Design Document - API",c={id:"api-specification/api-design",title:"Design Document - API",description:"Descriptions of classes, fields, and functions",source:"@site/docs/api-specification/api-design.md",sourceDirName:"api-specification",slug:"/api-specification/api-design",permalink:"/project-intelligest-smart-home/docs/api-specification/api-design",draft:!1,unlisted:!1,editUrl:"https://github.com/Capstone-Projects-2024-Spring/project-intelligest-smart-home/edit/main/documentation/docs/api-specification/api-design.md",tags:[],version:"current",lastUpdatedBy:"KevinXJarema",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"Descriptions of classes, fields, and functions"},sidebar:"docsSidebar",previous:{title:"API Specification",permalink:"/project-intelligest-smart-home/docs/category/api-specification"},next:{title:"Test Procedures",permalink:"/project-intelligest-smart-home/docs/category/test-procedures"}},l={},o=[{value:"Home Assistant",id:"home-assistant",level:2},{value:"Class Purpose",id:"class-purpose",level:3},{value:"Data Fields / Attributes:",id:"data-fields--attributes",level:4},{value:"<code>-devices[]</code>",id:"-devices",level:5},{value:"<code>-automations[]</code>",id:"-automations",level:5},{value:"Methods",id:"methods",level:4},{value:"<code>+add_device()</code>",id:"add_device",level:5},{value:"<code>+remove_device()</code>",id:"remove_device",level:5},{value:"<code>+update_device_status()</code>",id:"update_device_status",level:5},{value:"<code>+execute_automation()</code>",id:"execute_automation",level:5},{value:"User Interface",id:"user-interface",level:2},{value:"Class Purpose",id:"class-purpose-1",level:3},{value:"Data Fields / Attributes:",id:"data-fields--attributes-1",level:4},{value:"<code>-user_id</code>",id:"-user_id",level:5},{value:"<code>-command</code>",id:"-command",level:5},{value:"<code>-device_states[]</code>",id:"-device_states",level:5},{value:"Methods",id:"methods-1",level:4},{value:"<code>+send_command()</code>",id:"send_command",level:5},{value:"<code>+display_device_state()</code>",id:"display_device_state",level:5},{value:"Device",id:"device",level:2},{value:"Class Purpose",id:"class-purpose-2",level:3},{value:"Data Fields / Attributes",id:"data-fields--attributes-2",level:4},{value:"<code>-device_id</code>",id:"-device_id",level:5},{value:"<code>-device_type</code>",id:"-device_type",level:5},{value:"<code>-status</code>",id:"-status",level:5},{value:"<code>-capabilities[]</code>",id:"-capabilities",level:5},{value:"Methods",id:"methods-2",level:4},{value:"<code>+update_status()</code>",id:"update_status",level:5},{value:"<code>+execute_capability()</code>",id:"execute_capability",level:5},{value:"PythonScripts",id:"pythonscripts",level:2},{value:"Class Purpose",id:"class-purpose-3",level:3},{value:"Data Fields / Attributes",id:"data-fields--attributes-3",level:4},{value:"<code>-model</code>",id:"-model",level:5},{value:"<code>-interpreter</code>",id:"-interpreter",level:5},{value:"<code>-image</code>",id:"-image",level:5},{value:"<code>-prediction</code>",id:"-prediction",level:5},{value:"Methods",id:"methods-3",level:4},{value:"<code>+load_model()</code>",id:"load_model",level:5},{value:"<code>+capture_image()</code>",id:"capture_image",level:5},{value:"<code>+preprocess_image()</code>",id:"preprocess_image",level:5},{value:"<code>+make_prediction()</code>",id:"make_prediction",level:5},{value:"JavaScriptCustomCards",id:"javascriptcustomcards",level:2},{value:"Class Purpose",id:"class-purpose-4",level:3},{value:"Data Fields / Attributes",id:"data-fields--attributes-4",level:4},{value:"<code>-card_id</code>",id:"-card_id",level:5},{value:"<code>-image</code>",id:"-image-1",level:5},{value:"<code>-display_state</code>",id:"-display_state",level:5},{value:"Methods",id:"methods-4",level:4},{value:"<code>+create_card()</code>",id:"create_card",level:5},{value:"<code>+display_image()</code>",id:"display_image",level:5},{value:"<code>+update_display_state()</code>",id:"update_display_state",level:5},{value:"Camera",id:"camera",level:2},{value:"Class Purpose",id:"class-purpose-5",level:3},{value:"Data Fields / Attributes",id:"data-fields--attributes-5",level:4},{value:"<code>-image</code>",id:"-image-2",level:5},{value:"Methods",id:"methods-5",level:4},{value:"<code>+capture_image()</code>",id:"capture_image-1",level:5},{value:"TPU",id:"tpu",level:2},{value:"Class Purpose",id:"class-purpose-6",level:3},{value:"Data Fields / Attributes:",id:"data-fields--attributes-6",level:4},{value:"<code>-model</code>",id:"-model-1",level:5},{value:"Methods",id:"methods-6",level:4},{value:"<code>+load_model()</code>",id:"load_model-1",level:5},{value:"<code>+make_prediction()</code>",id:"make_prediction-1",level:5},{value:"Home Assistant RESTful API",id:"home-assistant-restful-api",level:2},{value:"Class Purpose",id:"class-purpose-7",level:3},{value:"/api/",id:"api",level:5},{value:"/api/services",id:"apiservices",level:5},{value:"/api/states",id:"apistates",level:5},{value:"/api/calendars",id:"apicalendars",level:5}];function r(e){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",p:"p",pre:"pre",...(0,t.a)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.h1,{id:"design-document---api",children:"Design Document - API"}),"\n",(0,d.jsx)(i.h2,{id:"home-assistant",children:"Home Assistant"}),"\n",(0,d.jsx)(i.h3,{id:"class-purpose",children:"Class Purpose"}),"\n",(0,d.jsx)(i.p,{children:"The core of our system, acting as the server. It\u2019s responsible for managing the state of all connected devices and automations. It communicates with the user interface to display device statuses. It also communicates with the IntelliGest system by receiving data payloads sent through an MQTT Broker which include a prediction for the action. It also interacts with the devices themselves to control their states based on user input and automation rules."}),"\n",(0,d.jsx)(i.h4,{id:"data-fields--attributes",children:"Data Fields / Attributes:"}),"\n",(0,d.jsx)(i.h5,{id:"-devices",children:(0,d.jsx)(i.code,{children:"-devices[]"})}),"\n",(0,d.jsx)(i.p,{children:"It will contain Information about all Home devices: TV, Alarm, Weather, Thermostat, Locks, Reminders, To-do list"}),"\n",(0,d.jsx)(i.h5,{id:"-automations",children:(0,d.jsx)(i.code,{children:"-automations[]"})}),"\n",(0,d.jsx)(i.p,{children:"Contains information about automations"}),"\n",(0,d.jsx)(i.h4,{id:"methods",children:"Methods"}),"\n",(0,d.jsx)(i.h5,{id:"add_device",children:(0,d.jsx)(i.code,{children:"+add_device()"})}),"\n",(0,d.jsx)(i.p,{children:"Function capable of adding a new device to Home Assistant"}),"\n",(0,d.jsx)(i.h5,{id:"remove_device",children:(0,d.jsx)(i.code,{children:"+remove_device()"})}),"\n",(0,d.jsx)(i.p,{children:"Function can remove a device"}),"\n",(0,d.jsx)(i.h5,{id:"update_device_status",children:(0,d.jsx)(i.code,{children:"+update_device_status()"})}),"\n",(0,d.jsx)(i.p,{children:"Function can update device to current status"}),"\n",(0,d.jsx)(i.h5,{id:"execute_automation",children:(0,d.jsx)(i.code,{children:"+execute_automation()"})}),"\n",(0,d.jsx)(i.p,{children:"Function executes automation for that device"}),"\n",(0,d.jsx)(i.h2,{id:"user-interface",children:"User Interface"}),"\n",(0,d.jsx)(i.h3,{id:"class-purpose-1",children:"Class Purpose"}),"\n",(0,d.jsx)(i.p,{children:"The user interface is the Home Assistant dashboard that allows users to interact with the system. It sends user commands to the Home Assistant and displays the status of the devices. The dashboard is highly customizable and can display information from various components. We will be creating custom cards for the dashboard to display ASL images."}),"\n",(0,d.jsx)(i.h4,{id:"data-fields--attributes-1",children:"Data Fields / Attributes:"}),"\n",(0,d.jsx)(i.h5,{id:"-user_id",children:(0,d.jsx)(i.code,{children:"-user_id"})}),"\n",(0,d.jsx)(i.p,{children:"User ID"}),"\n",(0,d.jsx)(i.h5,{id:"-command",children:(0,d.jsx)(i.code,{children:"-command"})}),"\n",(0,d.jsx)(i.p,{children:"All 8 hand gestures for diffent devices"}),"\n",(0,d.jsx)(i.h5,{id:"-device_states",children:(0,d.jsx)(i.code,{children:"-device_states[]"})}),"\n",(0,d.jsx)(i.p,{children:"On/Off/Other state of the device"}),"\n",(0,d.jsx)(i.h4,{id:"methods-1",children:"Methods"}),"\n",(0,d.jsx)(i.h5,{id:"send_command",children:(0,d.jsx)(i.code,{children:"+send_command()"})}),"\n",(0,d.jsx)(i.p,{children:"Function sends commands from User Interface"}),"\n",(0,d.jsx)(i.h5,{id:"display_device_state",children:(0,d.jsx)(i.code,{children:"+display_device_state()"})}),"\n",(0,d.jsx)(i.p,{children:"Function displays different states of Home devices on User Interface"}),"\n",(0,d.jsx)(i.h2,{id:"device",children:"Device"}),"\n",(0,d.jsx)(i.h3,{id:"class-purpose-2",children:"Class Purpose"}),"\n",(0,d.jsx)(i.p,{children:"These are the actual smart home devices (lights, thermostats, cameras, etc.) that are being controlled. They communicate with Home Assistant to receive commands and send status updates. The devices are controlled using the built-in components provided by Home Assistant, but can be written to include other devices."}),"\n",(0,d.jsx)(i.h4,{id:"data-fields--attributes-2",children:"Data Fields / Attributes"}),"\n",(0,d.jsx)(i.h5,{id:"-device_id",children:(0,d.jsx)(i.code,{children:"-device_id"})}),"\n",(0,d.jsx)(i.p,{children:"Device ID that is a discriminator to determine a device."}),"\n",(0,d.jsx)(i.h5,{id:"-device_type",children:(0,d.jsx)(i.code,{children:"-device_type"})}),"\n",(0,d.jsx)(i.p,{children:"Type of device"}),"\n",(0,d.jsx)(i.h5,{id:"-status",children:(0,d.jsx)(i.code,{children:"-status"})}),"\n",(0,d.jsx)(i.p,{children:"Status of device"}),"\n",(0,d.jsx)(i.h5,{id:"-capabilities",children:(0,d.jsx)(i.code,{children:"-capabilities[]"})}),"\n",(0,d.jsx)(i.p,{children:"Capabilities of the device, as specified by requirements or Apple's HAP when necessary."}),"\n",(0,d.jsx)(i.h4,{id:"methods-2",children:"Methods"}),"\n",(0,d.jsx)(i.h5,{id:"update_status",children:(0,d.jsx)(i.code,{children:"+update_status()"})}),"\n",(0,d.jsx)(i.p,{children:"Function updates status of device"}),"\n",(0,d.jsx)(i.h5,{id:"execute_capability",children:(0,d.jsx)(i.code,{children:"+execute_capability()"})}),"\n",(0,d.jsx)(i.p,{children:"Function executes capabilities of device"}),"\n",(0,d.jsx)(i.h2,{id:"pythonscripts",children:"PythonScripts"}),"\n",(0,d.jsx)(i.h3,{id:"class-purpose-3",children:"Class Purpose"}),"\n",(0,d.jsx)(i.p,{children:"These are scripts that we will write to load the machine learning model into the Coral TPU, capture and pre-process images using OpenCV, and make predictions. The scripts will be run on a Raspberry Pi 4, with a Coral TPU co-processor."}),"\n",(0,d.jsx)(i.p,{children:"The OpenCV library will be used to capture images or video frames from a camera connected to the Raspberry Pi. These images will then be preprocessed (e.g., resized, normalized) to be compatible with the input requirements of the TensorFlow Lite model."}),"\n",(0,d.jsx)(i.p,{children:"The TensorFlow Lite model, which has been trained to recognize ASL gestures, will then be loaded into the Coral TPU. The preprocessed images will be passed to this model to make predictions."}),"\n",(0,d.jsx)(i.h4,{id:"data-fields--attributes-3",children:"Data Fields / Attributes"}),"\n",(0,d.jsx)(i.h5,{id:"-model",children:(0,d.jsx)(i.code,{children:"-model"})}),"\n",(0,d.jsx)(i.p,{children:"This is the machine learning model loaded into the Coral TPU."}),"\n",(0,d.jsx)(i.h5,{id:"-interpreter",children:(0,d.jsx)(i.code,{children:"-interpreter"})}),"\n",(0,d.jsx)(i.p,{children:"This is the TensorFlow Lite interpreter used to run the model."}),"\n",(0,d.jsx)(i.h5,{id:"-image",children:(0,d.jsx)(i.code,{children:"-image"})}),"\n",(0,d.jsx)(i.p,{children:"This is the image captured by the Pi Camera."}),"\n",(0,d.jsx)(i.h5,{id:"-prediction",children:(0,d.jsx)(i.code,{children:"-prediction"})}),"\n",(0,d.jsx)(i.p,{children:"This is the prediction made by the model based on the image."}),"\n",(0,d.jsx)(i.h4,{id:"methods-3",children:"Methods"}),"\n",(0,d.jsx)(i.h5,{id:"load_model",children:(0,d.jsx)(i.code,{children:"+load_model()"})}),"\n",(0,d.jsx)(i.p,{children:"Function loads Machine Learning model of PythonScripts"}),"\n",(0,d.jsx)(i.h5,{id:"capture_image",children:(0,d.jsx)(i.code,{children:"+capture_image()"})}),"\n",(0,d.jsx)(i.p,{children:"Function captures Image of User's hand gestures"}),"\n",(0,d.jsx)(i.h5,{id:"preprocess_image",children:(0,d.jsx)(i.code,{children:"+preprocess_image()"})}),"\n",(0,d.jsx)(i.p,{children:"Function Pre-Processes Image of User's hand gestures"}),"\n",(0,d.jsx)(i.h5,{id:"make_prediction",children:(0,d.jsx)(i.code,{children:"+make_prediction()"})}),"\n",(0,d.jsx)(i.p,{children:"Function makes prediction to identify correct hand gesture"}),"\n",(0,d.jsx)(i.h2,{id:"javascriptcustomcards",children:"JavaScriptCustomCards"}),"\n",(0,d.jsx)(i.h3,{id:"class-purpose-4",children:"Class Purpose"}),"\n",(0,d.jsx)(i.p,{children:"These are custom cards that we will create for the Home Assistant dashboard to display ASL images. The cards will be written in JavaScript and Home Assistant frontend development framework and will be used to enhance the user interface for our targeted demographic and provide necessary visual feedback when required."}),"\n",(0,d.jsx)(i.h4,{id:"data-fields--attributes-4",children:"Data Fields / Attributes"}),"\n",(0,d.jsx)(i.h5,{id:"-card_id",children:(0,d.jsx)(i.code,{children:"-card_id"})}),"\n",(0,d.jsx)(i.p,{children:"Javascript Custom Card ID"}),"\n",(0,d.jsx)(i.h5,{id:"-image-1",children:(0,d.jsx)(i.code,{children:"-image"})}),"\n",(0,d.jsx)(i.p,{children:"Image of Javascript Custom Card"}),"\n",(0,d.jsx)(i.h5,{id:"-display_state",children:(0,d.jsx)(i.code,{children:"-display_state"})}),"\n",(0,d.jsx)(i.p,{children:"This is the current display state of the custom card."}),"\n",(0,d.jsx)(i.h4,{id:"methods-4",children:"Methods"}),"\n",(0,d.jsx)(i.h5,{id:"create_card",children:(0,d.jsx)(i.code,{children:"+create_card()"})}),"\n",(0,d.jsx)(i.p,{children:"This function creates a new custom card."}),"\n",(0,d.jsx)(i.h5,{id:"display_image",children:(0,d.jsx)(i.code,{children:"+display_image()"})}),"\n",(0,d.jsxs)(i.p,{children:["This function displays an ",(0,d.jsx)(i.code,{children:"image"})," on the custom card."]}),"\n",(0,d.jsx)(i.h5,{id:"update_display_state",children:(0,d.jsx)(i.code,{children:"+update_display_state()"})}),"\n",(0,d.jsxs)(i.p,{children:["This function updates the ",(0,d.jsx)(i.code,{children:"display_state"})," of the custom card."]}),"\n",(0,d.jsx)(i.h2,{id:"camera",children:"Camera"}),"\n",(0,d.jsx)(i.h3,{id:"class-purpose-5",children:"Class Purpose"}),"\n",(0,d.jsx)(i.p,{children:"Camera catches instances of User hand gestures. Also, it sends those images to Class PythonScripts"}),"\n",(0,d.jsx)(i.h4,{id:"data-fields--attributes-5",children:"Data Fields / Attributes"}),"\n",(0,d.jsx)(i.h5,{id:"-image-2",children:(0,d.jsx)(i.code,{children:"-image"})}),"\n",(0,d.jsx)(i.p,{children:"Image used in processing"}),"\n",(0,d.jsx)(i.h4,{id:"methods-5",children:"Methods"}),"\n",(0,d.jsx)(i.h5,{id:"capture_image-1",children:(0,d.jsx)(i.code,{children:"+capture_image()"})}),"\n",(0,d.jsx)(i.p,{children:"This function captures an image or video frame."}),"\n",(0,d.jsx)(i.h2,{id:"tpu",children:"TPU"}),"\n",(0,d.jsx)(i.h3,{id:"class-purpose-6",children:"Class Purpose"}),"\n",(0,d.jsx)(i.p,{children:"TPU is responsible for loading all 8 Machine Learning Models and accurately identifies the User Hand Gesture and sends it to PythonScripts class."}),"\n",(0,d.jsx)(i.h4,{id:"data-fields--attributes-6",children:"Data Fields / Attributes:"}),"\n",(0,d.jsx)(i.h5,{id:"-model-1",children:(0,d.jsx)(i.code,{children:"-model"})}),"\n",(0,d.jsx)(i.p,{children:"This is the machine learning model loaded into the Coral TPU."}),"\n",(0,d.jsx)(i.h4,{id:"methods-6",children:"Methods"}),"\n",(0,d.jsx)(i.h5,{id:"load_model-1",children:(0,d.jsx)(i.code,{children:"+load_model()"})}),"\n",(0,d.jsx)(i.p,{children:"Function loads Machine Learning model"}),"\n",(0,d.jsx)(i.h5,{id:"make_prediction-1",children:(0,d.jsx)(i.code,{children:"+make_prediction()"})}),"\n",(0,d.jsx)(i.p,{children:"This function makes a prediction based on the preprocessed image using the model loaded into the Coral TPU."}),"\n",(0,d.jsx)(i.h2,{id:"home-assistant-restful-api",children:"Home Assistant RESTful API"}),"\n",(0,d.jsx)(i.h3,{id:"class-purpose-7",children:"Class Purpose"}),"\n",(0,d.jsx)(i.p,{children:"RESTful API is responsible to establish communication between Home Assistant and IntelliGest, Home appliances. It will also get the state (On/off, etc) of Home appliances and will have power to change it as well."}),"\n",(0,d.jsx)(i.h5,{id:"api",children:"/api/"}),"\n",(0,d.jsx)(i.p,{children:"Returns a message if the API is up and running."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{children:'{\n  "message": "API running."\n}\n'})}),"\n",(0,d.jsx)(i.h5,{id:"apiservices",children:"/api/services"}),"\n",(0,d.jsx)(i.p,{children:"Returns an array of service objects. Each object contains the domain and which services it contains."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{children:'[\n    {\n      "domain": "browser",\n      "services": [\n        "browse_url"\n      ]\n    },\n    {\n      "domain": "keyboard",\n      "services": [\n        "volume_up",\n        "volume_down"\n      ]\n    }\n]\n'})}),"\n",(0,d.jsx)(i.h5,{id:"apistates",children:"/api/states"}),"\n",(0,d.jsx)(i.p,{children:"Returns an array of state objects. Each state has the following attributes: entity_id, state, last_changed and attributes"}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{children:'[\n    {\n        "attributes": {},\n        "entity_id": "sun.sun",\n        "last_changed": "2016-05-30T21:43:32.418320+00:00",\n        "state": "below_horizon"\n    },\n    {\n        "attributes": {},\n        "entity_id": "process.Dropbox",\n        "last_changed": "22016-05-30T21:43:32.418320+00:00",\n        "state": "on"\n    }\n]\n'})}),"\n",(0,d.jsx)(i.h5,{id:"apicalendars",children:"/api/calendars"}),"\n",(0,d.jsx)(i.p,{children:"Returns the list of calendar entities."}),"\n",(0,d.jsx)(i.pre,{children:(0,d.jsx)(i.code,{children:'[\n  {\n    "entity_id": "calendar.holidays",\n    "name": "National Holidays",\n  },\n  {\n    "entity_id": "calendar.personal",\n    "name": "Personal Calendar",\n  }\n]\n'})})]})}function h(e={}){const{wrapper:i}={...(0,t.a)(),...e.components};return i?(0,d.jsx)(i,{...e,children:(0,d.jsx)(r,{...e})}):r(e)}},11151:(e,i,s)=>{s.d(i,{Z:()=>c,a:()=>n});var d=s(67294);const t={},a=d.createContext(t);function n(e){const i=d.useContext(a);return d.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:n(e.components),d.createElement(a.Provider,{value:i},e.children)}}}]);